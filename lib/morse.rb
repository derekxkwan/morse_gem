module Morse
  @@morse_dict = {"a" => [1,2],
              "b" => [2,1,1,1],
              "c" => [2,1,2,1],
              "d" => [2,1,1],
              "e" => [1],
              "f" => [1,1,2,1],
              "g" => [2,2,1],
              "h" => [1,1,1,1],
              "i" => [1,1],
              "j" => [1,2,2,2],
              "k" => [2,1,2],
              "l" => [1,2,1,1],
              "m" => [2,2],
              "n" => [2,1],
              "o" => [2,2,2],
              "p" => [1,2,2,1],
              "q" => [2,2,1,2],
              "r" => [1,2,1],
              "s" => [1,1,1],
              "t" => [2],
              "u" => [1,1,2],
              "v" => [1,1,1,2],
              "w" => [1,2,2],
              "x" => [2,1,1,2],
              "y" => [2,1,2,2],
              "z" => [2,2,1,1],
              "0" => [2,2,2,2,2],
              "1" => [1,2,2,2,2],
              "2" => [1,1,2,2,2],
              "3" => [1,1,1,2,2],
              "4" => [1,1,1,1,2],
              "5" => [1,1,1,1,1],
              "6" => [2,1,1,1,1],
              "7" => [2,2,1,1,1],
              "8" => [2,2,2,1,1],
              "9" => [2,2,2,2,1],
              "!" => [2,1,2,1,2,2],
              "\\" => [1,2,1,1,2,1],
              "$" => [1,1,1,2,1,1,2],
              "\"" => [1,2,2,2,2,1],
              "(" => [2,1,2,2,1],
              ")" => [2,1,2,2,1,2],
              "+" => [1,2,1,2,1],
              "," => [2,2,1,1,2,2],
              "-" => [2,1,1,1,1,2],
              "." => [1,2,1,2,1,2],
              "/" => [2,1,1,2,1],
              ":" => [2,2,2,1,1,1],
              ";" => [2,1,2,1,2,1],
              "=" => [2,1,1,1,2],
              "?" => [1,1,2,2,1,1],
              "@" => [1,2,2,1,2,1]}

  def self.encode(input, short = 0.5, long = 1, gap = -1, space = nil)
    input_arr = input.downcase.split("")
    morsed = input_arr.collect do |x|
      ret_var = nil
      if x != " "
        ret_dur = @@morse_dict.fetch(x, [])
        ret_arr = ret_dur.collect do |y|
          if y == 1
            short
          else
            long
          end
        end
        ret_var = ret_arr + [gap]
      elsif !space.nil?
        ret_var = [space]
      end
    end
    
    morsed.flatten.select {|x| !x.nil?}
  end
end


